---
name: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏—Ü –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26
overview: –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è –º–µ–∂–¥—É –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Ñ–∞–π–ª–æ–≤ —Å –ª–∏—Ü–∞–º–∏ –≤ UI (5090) –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∑–∞–ø–∏—Å–µ–π –≤ face_rectangles (4) –¥–ª—è pipeline_run_id=26, face_run_id=27.
todos:
  - id: diagnose_problem
    content: "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã: –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –º–µ–∂–¥—É files.faces_count –∏ face_rectangles –¥–ª—è run_id=27, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ files —Å faces_scanned_at –Ω–æ –±–µ–∑ face_rectangles"
    status: completed
  - id: check_resume_logic
    content: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏–∫—É resume –≤ scan_faces_local: –ø–æ–Ω—è—Ç—å, –ø–æ—á–µ–º—É —Ñ–∞–π–ª—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ faces_scanned_at, –Ω–æ face_rectangles –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è"
    status: completed
  - id: create_fix_script
    content: "–°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è: –æ—á–∏—Å—Ç–∏—Ç—å faces_scanned_at –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26, —á—Ç–æ–±—ã –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –ª–∏—Ü"
    status: completed
  - id: improve_resume_logic
    content: "–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É resume: –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–∞–ª–∏—á–∏–µ face_rectangles –ø–µ—Ä–µ–¥ –ø—Ä–æ–ø—É—Å–∫–æ–º —Ñ–∞–π–ª–∞, –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –æ–ø—Ü–∏—é 'force_rescan' –¥–ª—è –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è"
    status: completed
  - id: add_include_excluded_dirs
    content: "–î–æ–±–∞–≤–∏—Ç—å —Ñ–ª–∞–≥ --include-excluded-dirs –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å–∫–ª—é—á–∞–µ–º—ã—Ö –ø–∞–ø–∫–∞—Ö (_faces, _no_faces –∏ —Ç.–¥.)"
    status: completed
  - id: fix_clustering_import
    content: "–ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –ª–∏—Ü (ModuleNotFoundError: No module named 'backend')"
    status: completed
  - id: verify_fix
    content: "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –ª–∏—Ü –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26 –∏ —É–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ face_rectangles —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ"
    status: completed
  - id: wait_completion
    content: "–î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ—Ç–µ–∫—Ü–∏–∏ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ (–æ—Å—Ç–∞–≤–ª–µ–Ω–æ –Ω–∞ –Ω–æ—á—å). –ü–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã"
    status: completed
  - id: analyze_persons
    content: "–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–≤—è–∑–∫—É –ª–∏—Ü –∫ –ø–µ—Ä—Å–æ–Ω–∞–º –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø–æ –≤–∏–¥–µ–æ"
    status: completed
  - id: fix_model_path
    content: "–ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ ArcFace ONNX –≤ _create_face_recognition_model() - –º–æ–¥–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ models/face_recognition/, –∞ —Ñ—É–Ω–∫—Ü–∏—è –∏—Å–∫–∞–ª–∞ –≤ backend/models/face_recognition/"
    status: completed
  - id: extract_embeddings
    content: "–ò–∑–≤–ª–µ—á—å embeddings –¥–ª—è –≤—Å–µ—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ª–∏—Ü (14690 –ª–∏—Ü –±–µ–∑ embeddings). –ó–∞–ø—É—Å—Ç–∏—Ç—å backfill_embeddings.py"
    status: completed
  - id: run_clustering
    content: "–ó–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é –ª–∏—Ü –ø–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è embeddings"
    status: completed
  - id: assign_persons
    content: "–ü—Ä–∏–≤—è–∑–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –∫ –ø–µ—Ä—Å–æ–Ω–∞–º –∏–∑ —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫–∞"
    status: completed
  - id: process_videos
    content: "–û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã (–µ—Å–ª–∏ –µ—Å—Ç—å) —Å —Ñ–ª–∞–≥–æ–º --video-samples"
    status: pending
---

# –ü–ª–∞–Ω: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏—Ü –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26

## –ü—Ä–æ–±–ª–µ–º–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í UI –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è **5090 —Ñ–∞–π–ª–æ–≤ —Å –ª–∏—Ü–∞–º–∏** –¥–ª—è `pipeline_run_id=26`
- –í —Ç–∞–±–ª–∏—Ü–µ `face_rectangles` –¥–ª—è `run_id=27` —Ç–æ–ª—å–∫–æ **4 –∑–∞–ø–∏—Å–∏**
- –í —Ç–∞–±–ª–∏—Ü–µ `files` –¥–ª—è `faces_run_id=27` –µ—Å—Ç—å —Ñ–∞–π–ª—ã —Å `faces_count > 0`

**–ì–∏–ø–æ—Ç–µ–∑–∞:**
–ü—Ä–∏ resume –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏—Ü —Ñ–∞–π–ª—ã –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—Å—è (—Å—Ç—Ä–æ–∫–∞ 1740 –≤ `local_sort.py`), –µ—Å–ª–∏ —É –Ω–∏—Ö —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω `faces_scanned_at`, –Ω–æ `face_rectangles` –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:
1. –ü—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø–æ—Å–ª–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `faces_count`, –Ω–æ –¥–æ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è `face_rectangles`
2. –õ–æ–≥–∏–∫–∞ resume –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞: –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ `faces_scanned_at`, –Ω–æ –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `face_rectangles`
3. –û—à–∏–±–∫–∏ –ø—Ä–∏ `insert_detection` –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è

## –¶–µ–ª–∏

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—É:** –ø–æ–Ω—è—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è
2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ:** –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å `face_rectangles` –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26
3. **–£–ª—É—á—à–∏—Ç—å –ª–æ–≥–∏–∫—É resume:** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç—å –ø–æ–≤—Ç–æ—Ä–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –≤ –±—É–¥—É—â–µ–º

## –í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –¥–µ—Ç–µ–∫—Ü–∏–∏ (–±—ã—Å—Ç—Ä–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- –û—á–∏—Å—Ç–∏—Ç—å `faces_scanned_at` –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–≥–æ–Ω–∞ 26
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –ª–∏—Ü
- **–ü–ª—é—Å—ã:** –ø—Ä–æ—Å—Ç–æ–µ —Ä–µ—à–µ–Ω–∏–µ, –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω–æ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç –¥–∞–Ω–Ω—ã–µ
- **–ú–∏–Ω—É—Å—ã:** –ø–æ—Ç—Ä–µ–±—É–µ—Ç –≤—Ä–µ–º–µ–Ω–∏ –Ω–∞ –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ ~10 —Ç—ã—Å—è—á —Ñ–∞–π–ª–æ–≤

### –í–∞—Ä–∏–∞–Ω—Ç 2: –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ resume (–¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ)
- –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É resume: –ø—Ä–æ–≤–µ—Ä—è—Ç—å –Ω–µ —Ç–æ–ª—å–∫–æ `faces_scanned_at`, –Ω–æ –∏ –Ω–∞–ª–∏—á–∏–µ `face_rectangles`
- –ï—Å–ª–∏ `faces_scanned_at` –µ—Å—Ç—å, –Ω–æ `face_rectangles` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª
- **–ü–ª—é—Å—ã:** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—Ç–∏—Ç –ø—Ä–æ–±–ª–µ–º—É –≤ –±—É–¥—É—â–µ–º
- **–ú–∏–Ω—É—Å—ã:** –Ω–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç —É–∂–µ –ø–æ—Ç–µ—Ä—è–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É resume (–≤–∞—Ä–∏–∞–Ω—Ç 2)
- –ó–∞—Ç–µ–º –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26 (–≤–∞—Ä–∏–∞–Ω—Ç 1)
- **–ü–ª—é—Å—ã:** –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö, –∏ —É–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏

## –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π

### 1. –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º—ã ‚úÖ

**–ó–∞–¥–∞—á–∏:**
- [x] –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL-–∑–∞–ø—Ä–æ—Å –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è `files.faces_count` –∏ `face_rectangles` –¥–ª—è `run_id=27`
- [x] –ù–∞–π—Ç–∏ —Ñ–∞–π–ª—ã —Å `faces_count > 0`, –Ω–æ –±–µ–∑ –∑–∞–ø–∏—Å–µ–π –≤ `face_rectangles`
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –ø—Ä–æ–≥–æ–Ω–∞ 26 –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –æ—à–∏–±–æ–∫ –ø—Ä–∏ `insert_detection`
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ —Ñ–∞–π–ª—ã —Å `faces_scanned_at`, –Ω–æ –±–µ–∑ `face_rectangles`

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `backend/scripts/tools/diagnose_faces_issue.py`
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ: 5169 —Ñ–∞–π–ª–æ–≤ —Å `faces_count > 0`, –Ω–æ —Ç–æ–ª—å–∫–æ 4 –∑–∞–ø–∏—Å–∏ –≤ `face_rectangles`
- –ù–∞–π–¥–µ–Ω–æ 7535 —Ñ–∞–π–ª–æ–≤ —Å `faces_scanned_at`, –Ω–æ –±–µ–∑ `face_rectangles`

**SQL-–∑–∞–ø—Ä–æ—Å—ã:**
```sql
-- –°—Ä–∞–≤–Ω–µ–Ω–∏–µ files –∏ face_rectangles
SELECT 
    'files.faces_count > 0' AS source,
    COUNT(*) AS total_files,
    SUM(COALESCE(faces_count, 0)) AS total_faces_counted
FROM files
WHERE faces_run_id = 27 AND COALESCE(faces_count, 0) > 0 AND status != 'deleted'

UNION ALL

SELECT 
    'face_rectangles' AS source,
    COUNT(DISTINCT file_path) AS total_files,
    COUNT(*) AS total_faces_counted
FROM face_rectangles
WHERE run_id = 27 AND COALESCE(ignore_flag, 0) = 0;
```

```sql
-- –§–∞–π–ª—ã —Å faces_count, –Ω–æ –±–µ–∑ face_rectangles
SELECT f.path, f.faces_count, f.faces_scanned_at
FROM files f
LEFT JOIN face_rectangles fr ON fr.file_path = f.path AND fr.run_id = 27 AND COALESCE(fr.ignore_flag, 0) = 0
WHERE f.faces_run_id = 27 
  AND COALESCE(f.faces_count, 0) > 0 
  AND f.status != 'deleted'
  AND fr.id IS NULL
LIMIT 20;
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è ‚úÖ

**–ó–∞–¥–∞—á–∏:**
- [x] –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `backend/scripts/tools/reset_faces_scan.py` –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ `faces_scanned_at` –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞
- [x] –°–∫—Ä–∏–ø—Ç –¥–æ–ª–∂–µ–Ω:
  - –ü—Ä–∏–Ω–∏–º–∞—Ç—å `--pipeline-run-id`
  - –û—á–∏—â–∞—Ç—å `faces_scanned_at` –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–≥–æ–Ω–∞
  - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ –æ—á–∏—â–∞—Ç—å `face_rectangles` –¥–ª—è `face_run_id` (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ)
  - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É: —Å–∫–æ–ª—å–∫–æ —Ñ–∞–π–ª–æ–≤ –±—É–¥–µ—Ç –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ —Å–æ–∑–¥–∞–Ω—ã:**
- `backend/scripts/tools/reset_pipeline_status.py` ‚Äî —Å–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≥–æ–Ω–∞
- `backend/scripts/tools/check_pipeline_progress.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –æ—à–∏–±–æ–∫

**–ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**
```bash
python backend/scripts/tools/reset_faces_scan.py --pipeline-run-id 26 --clear-rectangles
```

### 3. –£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ resume ‚úÖ

**–ó–∞–¥–∞—á–∏:**
- [x] –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É resume –≤ `scan_faces_local` (—Å—Ç—Ä–æ–∫–∞ 1742-1757):
  - –í–º–µ—Å—Ç–æ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Ç–æ–ª—å–∫–æ `faces_scanned_at` –ø—Ä–æ–≤–µ—Ä—è—Ç—å —Ç–∞–∫–∂–µ –Ω–∞–ª–∏—á–∏–µ `face_rectangles`
  - –ï—Å–ª–∏ `faces_scanned_at` –µ—Å—Ç—å, –Ω–æ `face_rectangles` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç ‚Äî –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ñ–∞–π–ª
- [x] –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª—É—á–∞–µ–≤, –∫–æ–≥–¥–∞ —Ñ–∞–π–ª –ø—Ä–æ–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ resume
- [x] –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ `insert_detection` —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `face_rectangles` –ø–µ—Ä–µ–¥ –ø—Ä–æ–ø—É—Å–∫–æ–º —Ñ–∞–π–ª–∞
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ `_pipe_log` –ø—Ä–∏ –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–∏ —Ñ–∞–π–ª–æ–≤
- –û—à–∏–±–∫–∏ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –≤ –±–ª–æ–∫–µ `except Exception` —Å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ:**
```python
# –ë—ã–ª–æ:
if row and row.get("faces_run_id") is not None and int(row.get("faces_run_id")) == run_id_i and row.get("faces_scanned_at"):
    continue

# –°—Ç–∞–Ω–µ—Ç:
if row and row.get("faces_run_id") is not None and int(row.get("faces_run_id")) == run_id_i and row.get("faces_scanned_at"):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ face_rectangles –¥–ª—è —ç—Ç–æ–≥–æ —Ñ–∞–π–ª–∞
    cur_check = store.conn.cursor()
    cur_check.execute(
        "SELECT COUNT(*) FROM face_rectangles WHERE run_id = ? AND file_path = ? AND COALESCE(ignore_flag, 0) = 0",
        (run_id_i, db_path)
    )
    has_rectangles = int(cur_check.fetchone()[0] or 0) > 0
    if has_rectangles:
        continue  # –§–∞–π–ª —É–∂–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
    # –ï—Å–ª–∏ faces_scanned_at –µ—Å—Ç—å, –Ω–æ face_rectangles –Ω–µ—Ç ‚Äî –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä—É–µ–º
    _log(f"‚ö†Ô∏è  Resume: —Ñ–∞–π–ª {db_path} –∏–º–µ–µ—Ç faces_scanned_at, –Ω–æ –Ω–µ—Ç face_rectangles. –ü–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä—É–µ–º.")
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è üîÑ

**–ó–∞–¥–∞—á–∏:**
- [x] –ó–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –ª–∏—Ü –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26 –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- [x] –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ `face_rectangles` —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ ‚úÖ (–æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ 6099 —Ñ–∞–π–ª–æ–≤, –Ω–∞–π–¥–µ–Ω–æ 14690 –ª–∏—Ü)
- [x] –°—Ä–∞–≤–Ω–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤ —Å –ª–∏—Ü–∞–º–∏ –≤ UI –∏ –≤ `face_rectangles` ‚úÖ (4579 —Ñ–∞–π–ª–æ–≤ —Å –ª–∏—Ü–∞–º–∏)
- [x] –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ ‚úÖ (–±—ã–ª–æ 4 –∑–∞–ø–∏—Å–∏, —Å—Ç–∞–ª–æ 14690 –ª–∏—Ü)

**–§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 6099 —Ñ–∞–π–ª–æ–≤ (100%)
- ‚úÖ –ù–∞–π–¥–µ–Ω–æ: 14690 –ª–∏—Ü –≤ 4579 —Ñ–∞–π–ª–∞—Ö
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç faces_scanned_at
- ‚úÖ –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞: –±—ã–ª–æ 4 –∑–∞–ø–∏—Å–∏, —Å—Ç–∞–ª–æ 14690 –ª–∏—Ü

**–ù–µ–±–æ–ª—å—à–∏–µ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è (–Ω–æ—Ä–º–∞–ª—å–Ω–æ):**
- 71 —Ñ–∞–π–ª: –≤ `face_rectangles` –±–æ–ª—å—à–µ —Ñ–∞–π–ª–æ–≤ (4579), —á–µ–º –≤ `files` —Å `faces_count > 0` (4508) ‚Äî –≤–æ–∑–º–æ–∂–Ω–æ, `faces_count` –Ω–µ –æ–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- 1591 —Ñ–∞–π–ª —Å `faces_scanned_at`, –Ω–æ –±–µ–∑ `face_rectangles` ‚Äî —ç—Ç–æ —Ñ–∞–π–ª—ã –±–µ–∑ –ª–∏—Ü (`faces_count=0`), –¥–ª—è –Ω–∏—Ö `face_rectangles` –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è

**–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:**
- [x] –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `--include-excluded-dirs` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å–∫–ª—é—á–∞–µ–º—ã—Ö –ø–∞–ø–∫–∞—Ö
- [x] –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (`from logic.face_recognition import cluster_face_embeddings`)

## –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è

1. **–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞** (–∑–∞–¥–∞—á–∞ `diagnose_problem`) ‚úÖ
   - –í—ã–ø–æ–ª–Ω–∏—Ç—å SQL-–∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –º–∞—Å—à—Ç–∞–±–∞ –ø—Ä–æ–±–ª–µ–º—ã
   - –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–æ—á–Ω—É—é –ø—Ä–∏—á–∏–Ω—É —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏—è

2. **–°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** (–∑–∞–¥–∞—á–∞ `create_fix_script`) ‚úÖ
   - –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ `faces_scanned_at`
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –Ω–µ–±–æ–ª—å—à–æ–º –ø–æ–¥–º–Ω–æ–∂–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤

3. **–£–ª—É—á—à–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ resume** (–∑–∞–¥–∞—á–∞ `improve_resume_logic`) ‚úÖ
   - –ò–∑–º–µ–Ω–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É resume –≤ `scan_faces_local`
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

4. **–ü—Ä–∏–º–µ–Ω–µ–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è** (–∑–∞–¥–∞—á–∞ `verify_fix`) üîÑ
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—Å—Ç–∫–∏ `faces_scanned_at` –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞ 26 ‚úÖ
   - –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é –ª–∏—Ü ‚úÖ (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ, –æ—Å—Ç–∞–Ω–æ–≤–∏–ª–æ—Å—å –Ω–∞ ~300 —Ñ–∞–π–ª–∞—Ö)
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç ‚è≥

## –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ

**–õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≥—Ä–µ—Å—Å–∞:**
- –ü–µ—Ä–≤—ã–µ 20 —Ñ–∞–π–ª–æ–≤: –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –¥–æ –æ–±—Ä–∞–±–æ—Ç–∫–∏ (—á—Ç–æ–±—ã UI –Ω–µ –≤—ã–≥–ª—è–¥–µ–ª –∑–∞–≤–∏—Å—à–∏–º)
- –§–∞–π–ª—ã 21-200: –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 10 —Ñ–∞–π–ª–æ–≤
- –§–∞–π–ª—ã 201+: –ø—Ä–æ–≥—Ä–µ—Å—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 50 —Ñ–∞–π–ª–æ–≤

–≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –°–∫—Ä–∏–ø—Ç —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –ø—Ä–æ—Å—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è —Ä–µ–∂–µ –ø—Ä–∏ –±–æ–ª—å—à–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ñ–∞–π–ª–æ–≤.

## –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç—ã

### ‚úÖ –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ (–∑–∞–≤–µ—Ä—à–µ–Ω–∞)
- –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `backend/scripts/tools/diagnose_faces_issue.py`
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ: 5169 —Ñ–∞–π–ª–æ–≤ —Å `faces_count > 0`, –Ω–æ —Ç–æ–ª—å–∫–æ 4 –∑–∞–ø–∏—Å–∏ –≤ `face_rectangles`
- –ù–∞–π–¥–µ–Ω–æ 7535 —Ñ–∞–π–ª–æ–≤ —Å `faces_scanned_at`, –Ω–æ –±–µ–∑ `face_rectangles`

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ª–æ–≥–∏–∫–∏ resume (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- –ò–∑–º–µ–Ω–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ resume –≤ `scan_faces_local` (—Å—Ç—Ä–æ–∫–∞ 1742-1757)
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è `face_rectangles` –ø–µ—Ä–µ–¥ –ø—Ä–æ–ø—É—Å–∫–æ–º —Ñ–∞–π–ª–∞
- –ï—Å–ª–∏ `faces_scanned_at` –µ—Å—Ç—å, –Ω–æ `face_rectangles` –Ω–µ—Ç ‚Äî —Ñ–∞–π–ª –ø–µ—Ä–µ—Å–∫–∞–Ω–∏—Ä—É–µ—Ç—Å—è
- –î–æ–±–∞–≤–ª–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–∞–∫–∏—Ö —Å–ª—É—á–∞–µ–≤

### ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–æ–≤ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- `backend/scripts/tools/reset_faces_scan.py` ‚Äî –æ—á–∏—Å—Ç–∫–∞ `faces_scanned_at` –¥–ª—è –ø—Ä–æ–≥–æ–Ω–∞
- `backend/scripts/tools/reset_pipeline_status.py` ‚Äî —Å–±—Ä–æ—Å —Å—Ç–∞—Ç—É—Å–∞ –ø—Ä–æ–≥–æ–Ω–∞ –Ω–∞ 'running'
- `backend/scripts/tools/check_pipeline_progress.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –∏ –æ—à–∏–±–æ–∫ –ø—Ä–æ–≥–æ–Ω–∞

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- –î–æ–±–∞–≤–ª–µ–Ω —Ñ–ª–∞–≥ `--include-excluded-dirs` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤ –≤ –∏—Å–∫–ª—é—á–∞–µ–º—ã—Ö –ø–∞–ø–∫–∞—Ö
  - –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ –∏—Å–∫–ª—é—á–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ `_delete` –∏ —Å–ª—É–∂–µ–±–Ω—ã–µ –ø–∞–ø–∫–∏
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–∞–ø–∫–∏ (`_faces`, `_no_faces`, `_people_no_face`, `_animals`) –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏: `from logic.face_recognition import cluster_face_embeddings`
- –°–æ–∑–¥–∞–Ω—ã —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
  - `backend/scripts/tools/analyze_persons_and_video.py` ‚Äî –∞–Ω–∞–ª–∏–∑ –ø—Ä–∏–≤—è–∑–∫–∏ –ª–∏—Ü –∫ –ø–µ—Ä—Å–æ–Ω–∞–º –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –≤–∏–¥–µ–æ
  - `backend/scripts/tools/check_clusters_and_video.py` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, embeddings –∏ –≤–∏–¥–µ–æ
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ ArcFace ONNX –≤ `_create_face_recognition_model()`:
  - –ú–æ–¥–µ–ª—å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `models/face_recognition/w600k_r50.onnx` (–∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞)
  - –§—É–Ω–∫—Ü–∏—è —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –º–æ–¥–µ–ª—å

### ‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –¥–µ—Ç–µ–∫—Ü–∏–∏ (–∑–∞–≤–µ—Ä—à–µ–Ω–æ)
- –î–µ—Ç–µ–∫—Ü–∏—è —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ —Å —Ñ–ª–∞–≥–æ–º `--include-excluded-dirs`
- **–û–±—Ä–∞–±–æ—Ç–∞–Ω–æ —Ñ–∞–π–ª–æ–≤:** 6099 –∏–∑ 6099 (100%)
- **–ù–∞–π–¥–µ–Ω–æ –ª–∏—Ü:** 14690 –≤ 4579 —Ñ–∞–π–ª–∞—Ö (–±—ã–ª–æ —Ç–æ–ª—å–∫–æ 4!)
- **–í—Å–µ —Ñ–∞–π–ª—ã –∏–º–µ—é—Ç faces_scanned_at**
- –ü—Ä–æ–±–ª–µ–º–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ —Ä–µ—à–µ–Ω–∞: —Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Å—Ç—Ä–∞–Ω–µ–Ω–æ

### üîÑ –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–ª–µ –¥–µ—Ç–µ–∫—Ü–∏–∏
1. **Embeddings –Ω–µ —Å–æ–∑–¥–∞–Ω—ã:** 0 –∏–∑ 14690 –ª–∏—Ü –∏–º–µ—é—Ç embeddings
   - –ù—É–∂–Ω–∞ –º–æ–¥–µ–ª—å ArcFace ONNX
   - –ù—É–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å `backfill_embeddings.py`
2. **–ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞:** 0 –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –≤ –ë–î
   - –¢—Ä–µ–±—É—é—Ç—Å—è embeddings
3. **0 –ª–∏—Ü –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º:** –Ω–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º
   - –¢—Ä–µ–±—É–µ—Ç—Å—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è
4. **–í–∏–¥–µ–æ —Ñ–∞–π–ª—ã –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã:** 0 –≤–∏–¥–µ–æ –≤ –ø—Ä–æ–≥–æ–Ω–µ
   - –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `video_samples=0`

### üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
```powershell
# –ê–Ω–∞–ª–∏–∑ –ø–µ—Ä—Å–æ–Ω –∏ –≤–∏–¥–µ–æ
python backend/scripts/tools/analyze_persons_and_video.py --pipeline-run-id 26

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –∏ embeddings
python backend/scripts/tools/check_clusters_and_video.py --pipeline-run-id 26

# –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è
python backend/scripts/tools/diagnose_faces_issue.py
```

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

**–î–æ—Å—Ç–∏–≥–Ω—É—Ç–æ:**
- ‚úÖ –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –≤ `face_rectangles` –¥–ª—è `run_id=27`: **14690 –ª–∏—Ü –≤ 4579 —Ñ–∞–π–ª–∞—Ö** (–±—ã–ª–æ —Ç–æ–ª—å–∫–æ 4!)
- ‚úÖ –õ–æ–≥–∏–∫–∞ resume –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å–ª—É—á–∞–∏, –∫–æ–≥–¥–∞ `faces_scanned_at` –µ—Å—Ç—å, –Ω–æ `face_rectangles` –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç
- ‚úÖ –û—à–∏–±–∫–∏ –ø—Ä–∏ `insert_detection` –ª–æ–≥–∏—Ä—É—é—Ç—Å—è –∏ –Ω–µ –ø—Ä–∏–≤–æ–¥—è—Ç –∫ –ø–æ—Ç–µ—Ä–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –í—Å–µ —Ñ–∞–π–ª—ã (–≤–∫–ª—é—á–∞—è —Ç–µ, —á—Ç–æ –≤ `_faces`, `_no_faces` –∏ —Ç.–¥.) –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã: **6099 —Ñ–∞–π–ª–æ–≤**

**–ò—Ç–æ–≥:** –ü—Ä–æ–±–ª–µ–º–∞ –¥–µ—Ç–µ–∫—Ü–∏–∏ –ª–∏—Ü —Ä–µ—à–µ–Ω–∞. –î–µ—Ç–µ–∫—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ, –≤—Å–µ —Ñ–∞–π–ª—ã –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã, –ª–∏—Ü–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î.

## –ù–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ—Å–ª–µ –¥–µ—Ç–µ–∫—Ü–∏–∏

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Embeddings –Ω–µ —Å–æ–∑–¥–∞–Ω—ã ‚úÖ (–ø—É—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω)
**–°–∏–º–ø—Ç–æ–º—ã:**
- 0 –∏–∑ 14690 –ª–∏—Ü –∏–º–µ—é—Ç embeddings
- Embeddings –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã –¥–ª—è –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –ª–∏—Ü

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ú–æ–¥–µ–ª—å ArcFace ONNX –Ω–∞–π–¥–µ–Ω–∞ –≤ `models/face_recognition/w600k_r50.onnx`
- –ù–æ —Ñ—É–Ω–∫—Ü–∏—è `_create_face_recognition_model()` –∏—Å–∫–∞–ª–∞ –º–æ–¥–µ–ª—å –≤ `backend/models/face_recognition/` (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å)
- –§—É–Ω–∫—Ü–∏—è –≤–æ–∑–≤—Ä–∞—â–∞–ª–∞ `None`, embeddings –Ω–µ –∏–∑–≤–ª–µ–∫–∞–ª–∏—Å—å

**–†–µ—à–µ–Ω–∏–µ:**
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ –≤ `_create_face_recognition_model()`:
   - –ë—ã–ª–æ: `Path(__file__).parent.parent.parent / "models"` (–∏—Å–∫–∞–ª–æ –≤ `backend/models/`)
   - –°—Ç–∞–ª–æ: `Path(__file__).parent.parent.parent.parent / "models"` (–∏—â–µ—Ç –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞ `models/`)
2. ‚úÖ –ò–∑–≤–ª–µ—á—å embeddings –¥–ª—è —É–∂–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã—Ö –ª–∏—Ü:
   ```powershell
   python backend/scripts/tools/backfill_embeddings.py --run-id 27
   ```
   **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ 14690 –ª–∏—Ü, –æ—à–∏–±–æ–∫ 0. –í—Å–µ –ª–∏—Ü–∞ —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç embeddings (100%).

### –ü—Ä–æ–±–ª–µ–º–∞ 2: –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∞
**–°–∏–º–ø—Ç–æ–º—ã:**
- 0 –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –≤ –ë–î
- 0 –ª–∏—Ü –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç embeddings
- –ë–µ–∑ embeddings –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∞

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–æ—Å–ª–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏—è embeddings –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—é (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –ø—Ä–æ–≥–æ–Ω–µ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é)

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã
**–°–∏–º–ø—Ç–æ–º—ã:**
- 0 –≤–∏–¥–µ–æ —Ñ–∞–π–ª–æ–≤ –≤ –ø—Ä–æ–≥–æ–Ω–µ
- 0 –ª–∏—Ü –≤ –≤–∏–¥–µ–æ

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é `video_samples=0` (–≤–∏–¥–µ–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è)
- –í–∏–¥–µ–æ —Ñ–∞–π–ª—ã –º–æ–≥—É—Ç –±—ã—Ç—å –≤ –ë–î, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω—ã

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—É—Å–∫–µ –¥–µ—Ç–µ–∫—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `--video-samples 1` (–∏–ª–∏ 2-3) –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ

## –ü–ª–∞–Ω –¥–∞–ª—å–Ω–µ–π—à–∏—Ö –¥–µ–π—Å—Ç–≤–∏–π

### –®–∞–≥ 1: –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ embeddings
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –ø—É—Ç—å –∫ –º–æ–¥–µ–ª–∏ (–º–æ–¥–µ–ª—å –Ω–∞–π–¥–µ–Ω–∞ –≤ `models/face_recognition/w600k_r50.onnx`)
2. ‚è≥ –ò–∑–≤–ª–µ—á—å embeddings –¥–ª—è –≤—Å–µ—Ö –ª–∏—Ü:
   ```powershell
   python backend/scripts/tools/backfill_embeddings.py --run-id 27
   ```

### –®–∞–≥ 2: –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ
- ‚úÖ –ó–∞–ø—É—â–µ–Ω–∞ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è:
  ```powershell
  python backend/scripts/tools/clusterize_faces.py --run-id 27
  ```
- **–†–µ–∑—É–ª—å—Ç–∞—Ç:** –°–æ–∑–¥–∞–Ω–æ 10005 –∫–ª–∞—Å—Ç–µ—Ä–æ–≤, 10005 –ª–∏—Ü –≤ –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö (–∏–∑ 14690), 4685 –ª–∏—Ü - —à—É–º (–Ω–µ –ø–æ–ø–∞–ª–∏ –≤ –∫–ª–∞—Å—Ç–µ—Ä—ã)
- –°–∞–º—ã–π –±–æ–ª—å—à–æ–π –∫–ª–∞—Å—Ç–µ—Ä: 5813 –ª–∏—Ü
- –ü–æ—Å–ª–µ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –º–æ–∂–Ω–æ –ø—Ä–∏–≤—è–∑–∞—Ç—å –∫–ª–∞—Å—Ç–µ—Ä—ã –∫ –ø–µ—Ä—Å–æ–Ω–∞–º —á–µ—Ä–µ–∑ Web UI

### –®–∞–≥ 3: –ü—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º ‚úÖ
- ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –Ω–æ–≤—ã—Ö –ª–∏—Ü –∫ –ø–µ—Ä—Å–æ–Ω–∞–º —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Ç–µ—Ä—ã
- ‚úÖ –ü—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –ª–∏—Ü–∞ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –∫–ª–∞—Å—Ç–µ—Ä –∏–∑ —Ñ–æ—Ç–æ–∞—Ä—Ö–∏–≤–∞ –æ–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –ø–µ—Ä—Å–æ–Ω–µ —á–µ—Ä–µ–∑ JOIN (–±–µ–∑ —Å–æ–∑–¥–∞–Ω–∏—è –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö face_labels)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏: –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø–æ–∏—Å–∫–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º –Ω–æ–≤—ã—Ö
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ pipeline (`--cluster-eps`, `--cluster-min-samples`, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é eps=0.5)
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞ –ë–î –ø—Ä–∏ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (–∫–æ–º–º–∏—Ç—ã –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –∫–ª–∞—Å—Ç–µ—Ä–∞)
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ (eps=0.5, min_samples=2):**
  - 4492 –ª–∏—Ü–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Ç–µ—Ä—ã –∏–∑ —Ñ–æ—Ç–æ–∞—Ä—Ö–∏–≤–∞
  - 396 –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ —Å–æ–∑–¥–∞–Ω–æ
  - 1791 –ª–∏—Ü –æ—Å—Ç–∞–ª–æ—Å—å –∫–∞–∫ —à—É–º (12.2%)
- **–†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–º (–ø–æ —Ñ–∞–π–ª–∞–º –∏–∑ –ø—Ä–æ–≥–æ–Ω–∞ 26):**
  - 19 –ø–µ—Ä—Å–æ–Ω —Å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
  - –ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ: 1892 —Ñ–∞–π–ª–∞ (2958 –ª–∏—Ü) - **—Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏**
  - –ê–≥–∞—Ç–∞: 281 —Ñ–∞–π–ª (293 –ª–∏—Ü–∞)
  - –°–∞–Ω—ë–∫: 126 —Ñ–∞–π–ª–æ–≤ (128 –ª–∏—Ü)
  - –ù—é—Å—è: 85 —Ñ–∞–π–ª–æ–≤ (85 –ª–∏—Ü)
  - –ó–∞–±–æ—Ä–æ–≤ –ú–∏—Ö–∞–∏–ª: 75 —Ñ–∞–π–ª–æ–≤ (75 –ª–∏—Ü)
  - –†–∏–¥ –ê–Ω–Ω–∞: 68 —Ñ–∞–π–ª–æ–≤ (75 –ª–∏—Ü)
  - –ê—Ä—Ç—ë–º: 52 —Ñ–∞–π–ª–∞ (52 –ª–∏—Ü–∞)
  - –û—Å—Ç–∞–ª—å–Ω—ã–µ –ø–µ—Ä—Å–æ–Ω—ã: –æ—Ç 1 –¥–æ 16 —Ñ–∞–π–ª–æ–≤
- **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
  - –í—Å–µ–≥–æ –ª–∏—Ü –≤ –ø—Ä–æ–≥–æ–Ω–µ: 14690
  - –õ–∏—Ü –≤ –∫–ª–∞—Å—Ç–µ—Ä–∞—Ö: 8354 (56.9%)
  - –õ–∏—Ü –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º: 3714 (25.3%)
  - –õ–∏—Ü –±–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (—à—É–º): 1791 (12.2%)

### –ó–∞–¥–∞—á–∏ –Ω–∞ –±—É–¥—É—â–µ–µ
- **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ":** –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –ø–æ–Ω–∏–∂–µ–Ω–∏—è eps –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –¥–ª—è —É–º–µ–Ω—å—à–µ–Ω–∏—è –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —Ñ–∞–π–ª–æ–≤, –ø–æ–ø–∞–¥–∞—é—â–∏—Ö –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ" (—Å–µ–π—á–∞—Å 1892 —Ñ–∞–π–ª–∞ - —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ). –í–æ–∑–º–æ–∂–Ω–æ, —Å—Ç–æ–∏—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã eps –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä—Å–æ–Ω –∏–ª–∏ –≥—Ä—É–ø–ø –ø–µ—Ä—Å–æ–Ω.

## –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å

**–í—Å–µ –∑–∞–¥–∞—á–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:**
- ‚úÖ –î–µ—Ç–µ–∫—Ü–∏—è –ª–∏—Ü: 14690 –ª–∏—Ü –≤ 4579 —Ñ–∞–π–ª–∞—Ö
- ‚úÖ Embeddings: 100% –ª–∏—Ü –∏–º–µ—é—Ç embeddings
- ‚úÖ –ö–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏—è: 4492 –ª–∏—Ü–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Ç–µ—Ä—ã, 396 –Ω–æ–≤—ã—Ö –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ —Å–æ–∑–¥–∞–Ω–æ
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º: 3714 –ª–∏—Ü (25.3%) –ø—Ä–∏–≤—è–∑–∞–Ω–æ –∫ –ø–µ—Ä—Å–æ–Ω–∞–º —á–µ—Ä–µ–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –∫–ª–∞—Å—Ç–µ—Ä—ã
- ‚úÖ –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ pipeline (`--cluster-eps`, `--cluster-min-samples`)
- ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `analyze_person_distribution.py` –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ –ø–µ—Ä—Å–æ–Ω–∞–º

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- 19 –ø–µ—Ä—Å–æ–Ω —Å –ø—Ä–∏–≤—è–∑–∞–Ω–Ω—ã–º–∏ —Ñ–∞–π–ª–∞–º–∏
- 1892 —Ñ–∞–π–ª–∞ –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ" (—Ç—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤)
- 1791 –ª–∏—Ü –±–µ–∑ –∫–ª–∞—Å—Ç–µ—Ä–æ–≤ (—à—É–º, 12.2%)

**–ü–ª–∞–Ω –ø–µ—Ä–µ–º–µ—â–µ–Ω –≤ –∞—Ä—Ö–∏–≤:** `docs/archive/–∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ_–ø—Ä–æ–±–ª–µ–º—ã_–¥–µ—Ç–µ–∫—Ü–∏–∏_–ª–∏—Ü_–ø—Ä–æ–≥–æ–Ω_26.md`

### –®–∞–≥ 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–∏–¥–µ–æ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- –ï—Å–ª–∏ –µ—Å—Ç—å –≤–∏–¥–µ–æ —Ñ–∞–π–ª—ã, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –¥–µ—Ç–µ–∫—Ü–∏—é —Å `--video-samples 1-3`

## –ó–∞–¥–∞—á–∏ –Ω–∞ –±—É–¥—É—â–µ–µ

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –∫–ª–∞—Å—Ç–µ—Ä–∏–∑–∞—Ü–∏–∏ –¥–ª—è "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö"
- **–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ñ–∞–π–ª–æ–≤ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –∫–∞—Ç–µ–≥–æ—Ä–∏—é "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ" (1892 —Ñ–∞–π–ª–∞, 2958 –ª–∏—Ü)
- **–ó–∞–¥–∞—á–∞:** –ü–æ–Ω–∏–∑–∏—Ç—å ratio/eps –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏–µ", —á—Ç–æ–±—ã —É–º–µ–Ω—å—à–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–∂–Ω—ã—Ö —Å—Ä–∞–±–∞—Ç—ã–≤–∞–Ω–∏–π
- **–í–∞—Ä–∏–∞–Ω—Ç—ã —Ä–µ—à–µ–Ω–∏—è:**
  - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞–∑–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã eps –¥–ª—è —Ä–∞–∑–Ω—ã—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–µ—Ä—Å–æ–Ω
  - –î–æ–±–∞–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫—É –ø–æ—Ä–æ–≥–∞ —Å—Ö–æ–∂–µ—Å—Ç–∏ –¥–ª—è "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö" –æ—Ç–¥–µ–ª—å–Ω–æ
  - –£–ª—É—á—à–∏—Ç—å –∞–ª–≥–æ—Ä–∏—Ç–º –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è "–ü–æ—Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö" —á–µ—Ä–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–∞–ø–æ–∫ –∏–ª–∏ –¥—Ä—É–≥–∏–µ –º–µ—Ç—Ä–∏–∫–∏
